<div id="tela">
   <canvas></canvas>
</div>

<script>

var canvas = document.querySelector('canvas'),
    lapis  = canvas.getContext('2d'),
    tela   = document.getElementById('tela');

canvas.width  = tela.offsetWidth;
canvas.height = tela.offsetHeight;

var animar = (function(c) {
   var sprites = [],
       ligado  = false,
       tempoDecorrido = 0,
       ultimoCiclo    = 0;

   function novoSprite(sprite)
   {
      sprites.push(sprite);
   }

   function ligar()
   {
      ligado = true;
      proximoFrame();
   }

   function desligar()
   {
      ligado = false;
   }

   function proximoFrame()
   {
      if (!ligado) return;

      var agora = new Date().getTime();

      if (ultimoCiclo == 0) { ultimoCiclo = agora; } 

      tempoDecorrido = agora - ultimoCiclo;

      c.clearRect(
         0, 0,
         c.canvas.width,
         c.canvas.height
      );

      for (var i in sprites)
      {
         sprites[i].atualizar();
      }

      for (var i in sprites)
      {
         sprites[i].desenhar();
      }

      ultimoCiclo = agora;
      
      requestAnimationFrame( function() {
         proximoFrame();
      });
   }

   return {
      novo: novoSprite,
      on: ligar,
      off: desligar
   }

})(lapis);

function quadrado(contexto, x ,y) {
   return {
      lapis: contexto,
      x: x,
      y: y,

      desenhar: function()
      {
         var c = this.lapis;

         c.fillStyle = "#222";
         c.fillRect(this.x, this.y, 30, 30);
      },

      atualizar: function()
      {
         this.x += 5;

         if (this.x > this.lapis.canvas.width) { this.x = 0 };
      }
   }
}

var q  = quadrado(lapis, 50, 175);
var q2 = quadrado(lapis, 50, 225);
var q3 = quadrado(lapis, 50, 275);
var q4 = quadrado(lapis, 50, 325);

animar.novo(q);
animar.novo(q2);
animar.novo(q3);
animar.novo(q4);
animar.on();

</script>

<style>

#tela {
   margin: 2em auto;
   width: 80%; height: 25em;
   background-color: #ce3;
}

</style>